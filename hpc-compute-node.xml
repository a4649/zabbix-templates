<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>6.0</version>
    <date>2023-08-07T13:06:32Z</date>
    <groups>
        <group>
            <uuid>846977d1dfed4968bc5f8bdb363285bc</uuid>
            <name>Templates/Operating systems</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>da47d198d4f44843a777f67032c0462e</uuid>
            <template>HPC Compute Nodes</template>
            <name>HPC Compute Nodes</name>
            <description>HPC Compute Nodes template</description>
            <groups>
                <group>
                    <name>Templates/Operating systems</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>e9da63642c8142f895848818bc3f3426</uuid>
                    <name>Host name of Zabbix agent running</name>
                    <key>agent.hostname</key>
                    <delay>1h</delay>
                    <history>7d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1d</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>system</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>410cc4f15a2e4633b79c0a4d7bb23ffa</uuid>
                    <name>Zabbix agent ping</name>
                    <key>agent.ping</key>
                    <history>7d</history>
                    <description>The agent always returns 1 for this item. It could be used in combination with nodata() for availability check.</description>
                    <valuemap>
                        <name>Zabbix agent ping status</name>
                    </valuemap>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>system</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>8c346bc7e9fa426d9149f02f14dd6f6e</uuid>
                    <name>Version of Zabbix agent running</name>
                    <key>agent.version</key>
                    <delay>1h</delay>
                    <history>7d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1d</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>application</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>db61973964a64c59a431b8409180e608</uuid>
                    <name>Infiniband Firmware</name>
                    <key>ibstats.fw</key>
                    <delay>5m</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <triggers>
                        <trigger>
                            <uuid>11f7673077b042c080ddb902739410b7</uuid>
                            <expression>last(/HPC Compute Nodes/ibstats.fw)&lt;&gt;&quot;2.36.5000&quot;</expression>
                            <name>Infiniband Firmware version has changed</name>
                            <opdata>Reported firmware: {ITEM.LASTVALUE1}</opdata>
                            <priority>HIGH</priority>
                            <description>Infiniband firmware version has changed

Check:

ibstat | grep Firmware

It should be 2.36.5000</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>3f03184ba1ce4338894b503181f2cb26</uuid>
                    <name>Infiniband Physical State</name>
                    <key>ibstats.phystate</key>
                    <delay>5m</delay>
                    <triggers>
                        <trigger>
                            <uuid>84a9790aff9b482299e973aba25852bd</uuid>
                            <expression>last(/HPC Compute Nodes/ibstats.phystate)=0</expression>
                            <name>Infiniband Physical link is DOWN</name>
                            <priority>HIGH</priority>
                            <description>Infiniband physical interface status is DOWN

Check:

ibstat | grep &quot;Physical State&quot;</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>0cea34b776c94d559319c85c35f0a0e2</uuid>
                    <name>Infiniband Rate</name>
                    <key>ibstats.rate</key>
                    <delay>5m</delay>
                    <triggers>
                        <trigger>
                            <uuid>b704ea36b4c743f7973d7722e4a5efd9</uuid>
                            <expression>last(/HPC Compute Nodes/ibstats.rate)&lt;&gt;56</expression>
                            <name>Infiniband Rate has changed</name>
                            <opdata>Reported Rate: {ITEM.LASTVALUE1}</opdata>
                            <priority>HIGH</priority>
                            <description>Infiniband Rate has changed

Check:

ibstat | grep Rate

It should be 56 Gbps</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>bd8a1a2ed9364edd907b08081933dbfe</uuid>
                    <name>Infiniband State</name>
                    <key>ibstats.state</key>
                    <delay>5m</delay>
                    <triggers>
                        <trigger>
                            <uuid>32f1bb651b2b4671805c7dbf206dc325</uuid>
                            <expression>last(/HPC Compute Nodes/ibstats.state)=0</expression>
                            <name>Infiniband is not Active</name>
                            <priority>HIGH</priority>
                            <description>Infiniband interface status is not Active

Check:

ibstat | grep State</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>1cef922bffdc48d9ade6d44a714d7f69</uuid>
                    <name>Interface eth0: Inbound packets discarded</name>
                    <key>net.if.in[&quot;eth0&quot;,dropped]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>eth0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>79a9ed7441354b3eaada54c08c66bccc</uuid>
                    <name>Interface eth0: Inbound packets with errors</name>
                    <key>net.if.in[&quot;eth0&quot;,errors]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>eth0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>b7e1f9ee4b84403cad012c6e83f694d9</uuid>
                    <name>Interface eth0: Bits received</name>
                    <key>net.if.in[&quot;eth0&quot;]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <units>bps</units>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                        <step>
                            <type>MULTIPLIER</type>
                            <parameters>
                                <parameter>8</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>eth0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>33713698505a4ea289408e2895b031aa</uuid>
                    <name>Interface ib0: Inbound packets discarded</name>
                    <key>net.if.in[&quot;ib0&quot;,dropped]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>ib0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>384ba01341ac4d14bd5466c792e612ce</uuid>
                    <name>Interface ib0: Inbound packets with errors</name>
                    <key>net.if.in[&quot;ib0&quot;,errors]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>ib0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>969e0cca05b44930afc200d85fb87706</uuid>
                    <name>Interface ib0: Bits received</name>
                    <key>net.if.in[&quot;ib0&quot;]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <units>bps</units>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                        <step>
                            <type>MULTIPLIER</type>
                            <parameters>
                                <parameter>8</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>ib0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>b4ead66a276d4a0c9ffe6815fe84c674</uuid>
                    <name>Interface eth0: Outbound packets discarded</name>
                    <key>net.if.out[&quot;eth0&quot;,dropped]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>eth0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>cc52b97dc5ea4bbeab00ea5251285478</uuid>
                    <name>Interface eth0: Outbound packets with errors</name>
                    <key>net.if.out[&quot;eth0&quot;,errors]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>eth0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>cac266e6b3c149fc95ef17e90868d3bd</uuid>
                    <name>Interface eth0: Bits sent</name>
                    <key>net.if.out[&quot;eth0&quot;]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <units>bps</units>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                        <step>
                            <type>MULTIPLIER</type>
                            <parameters>
                                <parameter>8</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>eth0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>bea219c5554e4ed2a9bdf2046fd5513d</uuid>
                    <name>Interface ib0: Outbound packets discarded</name>
                    <key>net.if.out[&quot;ib0&quot;,dropped]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>ib0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>84d7dd40f12b4be19891c296614e237c</uuid>
                    <name>Interface ib0: Outbound packets with errors</name>
                    <key>net.if.out[&quot;ib0&quot;,errors]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>ib0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>913ff87abb2141da874996ff2d48c5be</uuid>
                    <name>Interface ib0: Bits sent</name>
                    <key>net.if.out[&quot;ib0&quot;]</key>
                    <delay>3m</delay>
                    <history>7d</history>
                    <units>bps</units>
                    <preprocessing>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                        <step>
                            <type>MULTIPLIER</type>
                            <parameters>
                                <parameter>8</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>ib0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>9d35c6d3e9c54726b4834afabe706299</uuid>
                    <name>System boot time</name>
                    <key>system.boottime</key>
                    <delay>15m</delay>
                    <history>7d</history>
                    <units>unixtime</units>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>system</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>216590cc48e2470f9fdfc0359c8d73e5</uuid>
                    <name>Load average (5m avg)</name>
                    <key>system.cpu.load[all,avg5]</key>
                    <history>7d</history>
                    <value_type>FLOAT</value_type>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>cpu</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>7adcc19313724b629689a4e9e76ca67f</uuid>
                    <name>Number of CPUs</name>
                    <key>system.cpu.num</key>
                    <delay>1h</delay>
                    <history>7d</history>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1d</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>cpu</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>5ff985a6a5984c3992346b3103823474</uuid>
                    <name>System name</name>
                    <key>system.hostname</key>
                    <delay>1h</delay>
                    <history>2w</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <description>System host name.</description>
                    <inventory_link>NAME</inventory_link>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>12h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>system</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>1f8a299a38a144e7afda686f6560a8af</uuid>
                            <expression>last(/HPC Compute Nodes/system.hostname,#1)&lt;&gt;last(/HPC Compute Nodes/system.hostname,#2) and length(last(/HPC Compute Nodes/system.hostname))&gt;0</expression>
                            <name>System name has changed</name>
                            <event_name>System name has changed (new name: {ITEM.VALUE})</event_name>
                            <priority>INFO</priority>
                            <description>System name has changed. Ack to close.</description>
                            <manual_close>YES</manual_close>
                            <tags>
                                <tag>
                                    <tag>scope</tag>
                                    <value>notice</value>
                                </tag>
                                <tag>
                                    <tag>scope</tag>
                                    <value>security</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>c1210163c14848a483b7594ba505f2f2</uuid>
                    <name>System local time</name>
                    <key>system.localtime</key>
                    <history>7d</history>
                    <units>unixtime</units>
                    <description>System local time of the host.</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>system</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>af3690d40994454eb24bd6e2aa149aeb</uuid>
                            <expression>fuzzytime(/HPC Compute Nodes/system.localtime,{$SYSTEM.FUZZYTIME.MAX})=0</expression>
                            <name>System time is out of sync</name>
                            <event_name>System time is out of sync (diff with Zabbix server &gt; {$SYSTEM.FUZZYTIME.MAX}s)</event_name>
                            <priority>WARNING</priority>
                            <description>The host system time is different from the Zabbix server time.</description>
                            <manual_close>YES</manual_close>
                            <tags>
                                <tag>
                                    <tag>scope</tag>
                                    <value>availability</value>
                                </tag>
                                <tag>
                                    <tag>scope</tag>
                                    <value>performance</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>2fc23d61a6814ff892adb42f706c5110</uuid>
                    <name>Total swap space</name>
                    <key>system.swap.size[,total]</key>
                    <delay>1h</delay>
                    <history>7d</history>
                    <units>B</units>
                    <description>The total space of swap volume/file in bytes.</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>memory</value>
                        </tag>
                        <tag>
                            <tag>component</tag>
                            <value>storage</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>ba832fb44a4b44d0a3f5b22d74801fa0</uuid>
                    <name>System description</name>
                    <key>system.uname</key>
                    <delay>15m</delay>
                    <history>2w</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <description>The information as normally returned by 'uname -a'.</description>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>12h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>system</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>3549e3fe06f6421cb5c489d0f5f407de</uuid>
                    <name>System uptime</name>
                    <key>system.uptime</key>
                    <delay>5m</delay>
                    <history>2w</history>
                    <trends>0</trends>
                    <units>uptime</units>
                    <description>System uptime in 'N days, hh:mm:ss' format.</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>system</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>a44f5161f1924023a6fb177522cd6671</uuid>
                            <expression>last(/HPC Compute Nodes/system.uptime)&lt;10m</expression>
                            <name>has been restarted</name>
                            <event_name>{HOST.NAME} has been restarted (uptime &lt; 10m)</event_name>
                            <priority>WARNING</priority>
                            <description>The host uptime is less than 10 minutes</description>
                            <manual_close>YES</manual_close>
                            <tags>
                                <tag>
                                    <tag>scope</tag>
                                    <value>notice</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>c421922005e8449da14aeb4dbfccc15e</uuid>
                    <name>NTP service</name>
                    <key>systemd.chronyd.status</key>
                    <delay>5m</delay>
                    <triggers>
                        <trigger>
                            <uuid>41fec9c9c8a14666b9ff514f7babeb98</uuid>
                            <expression>last(/HPC Compute Nodes/systemd.chronyd.status)=0</expression>
                            <name>NTP service is DOWN</name>
                            <priority>HIGH</priority>
                            <description>NTP systemd service is down.

Check:

sudo systemctl status -l chronyd</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>6aa7a5338616408fb2de6db22b4c92ef</uuid>
                    <name>LNET service</name>
                    <key>systemd.lnet.status</key>
                    <delay>5m</delay>
                    <triggers>
                        <trigger>
                            <uuid>11c0eb2d20f5434f83b36e1e0ac8b0e8</uuid>
                            <expression>last(/HPC Compute Nodes/systemd.lnet.status)=0</expression>
                            <name>LNET service is DOWN</name>
                            <priority>HIGH</priority>
                            <description>LNET systemd service is down.

Is crucial for access Lustre Storage

Check:

sudo systemctl status -l lnet

lnetctl net show</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>f5f410c6f9684a77814647e024a91d57</uuid>
                    <name>MUNGE service</name>
                    <key>systemd.munge.status</key>
                    <delay>5m</delay>
                    <triggers>
                        <trigger>
                            <uuid>42f5ae77b0bd4441b1f34ee585cebb32</uuid>
                            <expression>last(/HPC Compute Nodes/systemd.munge.status)=0</expression>
                            <name>MUNGE service is DOWN</name>
                            <priority>HIGH</priority>
                            <description>MUNGE (slurm authentication) systemd service is down.

Check:

sudo systemctl status -l munge

Logs:
/var/log/munge/munged.log</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>6eb13194e04c437086b92bc364fb70da</uuid>
                    <name>SLURM service</name>
                    <key>systemd.slurmd.status</key>
                    <delay>5m</delay>
                    <triggers>
                        <trigger>
                            <uuid>f4e694124c464def950b784105689bc0</uuid>
                            <expression>last(/HPC Compute Nodes/systemd.slurmd.status)=0</expression>
                            <name>SLURM service is DOWN</name>
                            <priority>HIGH</priority>
                            <description>SLURM systemd service is down.

Check:

sudo systemctl status -l slurmd

Logs:

/var/log/slurmd.log</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>736b706d4a8744db9c5d4a13bd43f87d</uuid>
                    <name>SSH service</name>
                    <key>systemd.sshd.status</key>
                    <delay>5m</delay>
                </item>
                <item>
                    <uuid>f5b274f2843b410e8a95d6dc55d728c0</uuid>
                    <name>SSS service</name>
                    <key>systemd.sssd.status</key>
                    <delay>5m</delay>
                    <triggers>
                        <trigger>
                            <uuid>b037aa8165c54583b8ea72e0b9000dd2</uuid>
                            <expression>last(/HPC Compute Nodes/systemd.sssd.status)=0</expression>
                            <name>SSS service is DOWN</name>
                            <priority>HIGH</priority>
                            <description>SSS systemd service is down.

SSS is critical for user authentication across cluster

Check:

sudo systemctl status -l sssd

Logs:

/var/log/sssd/sssd_macc.log</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>761d0228052e4b87bbb5bf5cb61047c3</uuid>
                    <name>TUNED service</name>
                    <key>systemd.tuned.status</key>
                    <delay>5m</delay>
                    <triggers>
                        <trigger>
                            <uuid>82aad817fd974e2c824adb9c57ef879d</uuid>
                            <expression>last(/HPC Compute Nodes/systemd.tuned.status)=0</expression>
                            <name>TUNED service is DOWN</name>
                            <priority>HIGH</priority>
                            <description>TUNED systemd service is down.

Check:

sudo systemctl status -l tuned</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>cc42129f7442451091760870e20f0de6</uuid>
                    <name>TUNED Profile</name>
                    <key>systemd.tunedprofile.status</key>
                    <delay>5m</delay>
                    <triggers>
                        <trigger>
                            <uuid>ff38a8575fd142f0be6bb5302407050e</uuid>
                            <expression>last(/HPC Compute Nodes/systemd.tunedprofile.status)=0</expression>
                            <name>TUNED Profile is incorrect</name>
                            <priority>HIGH</priority>
                            <description>TUNED Profile is incorrect

Check:

tuned-adm active

It should be: hpc-compute</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>626a93510bac47668a53b5cd7de54968</uuid>
                    <name>Interface eth0: Operational status</name>
                    <key>vfs.file.contents[&quot;/sys/class/net/eth0/operstate&quot;]</key>
                    <history>7d</history>
                    <trends>0</trends>
                    <description>Reference: https://www.kernel.org/doc/Documentation/networking/operstates.txt</description>
                    <valuemap>
                        <name>ifOperStatus</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>var newvalue;
switch(value) {
  case &quot;unknown&quot;:
    newvalue = 0;
    break;
  case &quot;notpresent&quot;:
    newvalue = 1;
    break;
  case &quot;down&quot;:
    newvalue = 2;
    break;
  case &quot;lowerlayerdown&quot;:
    newvalue = 3;
    break;
  case &quot;testing&quot;:
    newvalue = 4;
    break;
  case &quot;dormant&quot;:
    newvalue = 5;
    break;
  case &quot;up&quot;:
    newvalue = 6;
    break;  default:
    newvalue = &quot;Problem parsing interface operstate in JS&quot;;
}
return newvalue;</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>eth0</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>61e736d8ca6348d1af87d218e7e8257d</uuid>
                            <expression>{$IFCONTROL:&quot;eth0&quot;}=1 and last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/eth0/operstate&quot;])=2 and (last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/eth0/operstate&quot;],#1)&lt;&gt;last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/eth0/operstate&quot;],#2))</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/eth0/operstate&quot;])&lt;&gt;2 or {$IFCONTROL:&quot;eth0&quot;}=0</recovery_expression>
                            <name>Interface eth0: Link down</name>
                            <opdata>Current state: {ITEM.LASTVALUE1}</opdata>
                            <priority>AVERAGE</priority>
                            <description>This trigger expression works as follows:
1. Can be triggered if operations status is down.
2. {$IFCONTROL:&quot;eth0&quot;}=1 - user can redefine Context macro to value - 0. That marks this interface as not important. No new trigger will be fired if this interface is down.
3. {TEMPLATE_NAME:METRIC.diff()}=1) - trigger fires only if operational status was up(1) sometime before. (So, do not fire 'ethernal off' interfaces.)

WARNING: if closed manually - won't fire again on next poll, because of .diff.</description>
                            <manual_close>YES</manual_close>
                            <tags>
                                <tag>
                                    <tag>scope</tag>
                                    <value>availability</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>6e7f5bc3de74406f8a73b01ec7d4f005</uuid>
                    <name>Interface eth0: Speed</name>
                    <key>vfs.file.contents[&quot;/sys/class/net/eth0/speed&quot;]</key>
                    <delay>5m</delay>
                    <history>7d</history>
                    <trends>0d</trends>
                    <units>bps</units>
                    <description>Indicates the interface latest or current speed value. Value is an integer representing the link speed in bits/sec.
This attribute is only valid for interfaces that implement the ethtool get_link_ksettings method (mostly Ethernet).
Reference: https://www.kernel.org/doc/Documentation/ABI/testing/sysfs-class-net</description>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <parameters>
                                <parameter>1000000</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>eth0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>8cdea18bb6b84f93a1514386e5a51925</uuid>
                    <name>Interface ib0: Operational status</name>
                    <key>vfs.file.contents[&quot;/sys/class/net/ib0/operstate&quot;]</key>
                    <history>7d</history>
                    <trends>0</trends>
                    <description>Reference: https://www.kernel.org/doc/Documentation/networking/operstates.txt</description>
                    <valuemap>
                        <name>ifOperStatus</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>var newvalue;
switch(value) {
  case &quot;unknown&quot;:
    newvalue = 0;
    break;
  case &quot;notpresent&quot;:
    newvalue = 1;
    break;
  case &quot;down&quot;:
    newvalue = 2;
    break;
  case &quot;lowerlayerdown&quot;:
    newvalue = 3;
    break;
  case &quot;testing&quot;:
    newvalue = 4;
    break;
  case &quot;dormant&quot;:
    newvalue = 5;
    break;
  case &quot;up&quot;:
    newvalue = 6;
    break;  default:
    newvalue = &quot;Problem parsing interface operstate in JS&quot;;
}
return newvalue;</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>ib0</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>9c4611b50daf4f2c9f4e06bb6dffd226</uuid>
                            <expression>{$IFCONTROL:&quot;ib0&quot;}=1 and last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/ib0/operstate&quot;])=2 and (last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/ib0/operstate&quot;],#1)&lt;&gt;last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/ib0/operstate&quot;],#2))</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/ib0/operstate&quot;])&lt;&gt;2 or {$IFCONTROL:&quot;ib0&quot;}=0</recovery_expression>
                            <name>Interface ib0: Link down</name>
                            <opdata>Current state: {ITEM.LASTVALUE1}</opdata>
                            <priority>AVERAGE</priority>
                            <description>This trigger expression works as follows:
1. Can be triggered if operations status is down.
2. {$IFCONTROL:&quot;ib0&quot;}=1 - user can redefine Context macro to value - 0. That marks this interface as not important. No new trigger will be fired if this interface is down.
3. {TEMPLATE_NAME:METRIC.diff()}=1) - trigger fires only if operational status was up(1) sometime before. (So, do not fire 'ethernal off' interfaces.)

WARNING: if closed manually - won't fire again on next poll, because of .diff.</description>
                            <manual_close>YES</manual_close>
                            <tags>
                                <tag>
                                    <tag>scope</tag>
                                    <value>availability</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>ac52c1a16ebb429b91d5d0b605edf53f</uuid>
                    <name>Interface ib0: Speed</name>
                    <key>vfs.file.contents[&quot;/sys/class/net/ib0/speed&quot;]</key>
                    <delay>5m</delay>
                    <history>7d</history>
                    <trends>0d</trends>
                    <units>bps</units>
                    <description>Indicates the interface latest or current speed value. Value is an integer representing the link speed in bits/sec.
This attribute is only valid for interfaces that implement the ethtool get_link_ksettings method (mostly Ethernet).
Reference: https://www.kernel.org/doc/Documentation/ABI/testing/sysfs-class-net</description>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <parameters>
                                <parameter>1000000</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1h</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                        <tag>
                            <tag>interface</tag>
                            <value>ib0</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e6db32dfcdb943bcbd3464883fc0d3a1</uuid>
                    <name>Total memory</name>
                    <key>vm.memory.size[total]</key>
                    <delay>1h</delay>
                    <history>7d</history>
                    <units>B</units>
                    <description>Total memory in Bytes.</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>memory</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>d25a778eb98942f993266cbec2d7d6a7</uuid>
                    <name>Zabbix agent availability</name>
                    <type>INTERNAL</type>
                    <key>zabbix[host,agent,available]</key>
                    <history>7d</history>
                    <description>Monitoring the availability status of the agent.</description>
                    <valuemap>
                        <name>zabbix.host.available</name>
                    </valuemap>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>system</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>0749945a9b9f41f69b174ee9a15408ea</uuid>
                            <expression>max(/HPC Compute Nodes/zabbix[host,agent,available],{$AGENT.TIMEOUT})=0</expression>
                            <name>Zabbix agent is not available</name>
                            <event_name>Zabbix agent is not available (for {$AGENT.TIMEOUT})</event_name>
                            <priority>AVERAGE</priority>
                            <description>For passive only agents, host availability is used with {$AGENT.TIMEOUT} as time threshold.</description>
                            <manual_close>YES</manual_close>
                            <tags>
                                <tag>
                                    <tag>scope</tag>
                                    <value>availability</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <tags>
                <tag>
                    <tag>class</tag>
                    <value>os</value>
                </tag>
                <tag>
                    <tag>target</tag>
                    <value>linux</value>
                </tag>
            </tags>
            <macros>
                <macro>
                    <macro>{$AGENT.TIMEOUT}</macro>
                    <value>5m</value>
                    <description>Timeout after which agent is considered unavailable. Works only for agents reachable from Zabbix server/proxy (passive mode).</description>
                </macro>
                <macro>
                    <macro>{$CPU.UTIL.CRIT}</macro>
                    <value>90</value>
                </macro>
                <macro>
                    <macro>{$IF.ERRORS.WARN}</macro>
                    <value>2</value>
                </macro>
                <macro>
                    <macro>{$IF.UTIL.MAX}</macro>
                    <value>90</value>
                    <description>This macro is used as a threshold in interface utilization trigger.</description>
                </macro>
                <macro>
                    <macro>{$IFCONTROL}</macro>
                    <value>1</value>
                </macro>
                <macro>
                    <macro>{$KERNEL.MAXFILES.MIN}</macro>
                    <value>256</value>
                </macro>
                <macro>
                    <macro>{$KERNEL.MAXPROC.MIN}</macro>
                    <value>1024</value>
                </macro>
                <macro>
                    <macro>{$LOAD_AVG_PER_CPU.MAX.WARN}</macro>
                    <value>1.5</value>
                    <description>Load per CPU considered sustainable. Tune if needed.</description>
                </macro>
                <macro>
                    <macro>{$MEMORY.AVAILABLE.MIN}</macro>
                    <value>20M</value>
                    <description>This macro is used as a threshold in memory available trigger.</description>
                </macro>
                <macro>
                    <macro>{$MEMORY.UTIL.MAX}</macro>
                    <value>90</value>
                    <description>This macro is used as a threshold in memory utilization trigger.</description>
                </macro>
                <macro>
                    <macro>{$NET.IF.IFNAME.MATCHES}</macro>
                    <value>^.*$</value>
                </macro>
                <macro>
                    <macro>{$NET.IF.IFNAME.NOT_MATCHES}</macro>
                    <value>(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9A-z]+$|docker[0-9]+|br-[a-z0-9]{12})</value>
                    <description>Filter out loopbacks, nulls, docker veth links and docker0 bridge by default</description>
                </macro>
                <macro>
                    <macro>{$SWAP.PFREE.MIN.WARN}</macro>
                    <value>50</value>
                </macro>
                <macro>
                    <macro>{$SYSTEM.FUZZYTIME.MAX}</macro>
                    <value>60</value>
                </macro>
                <macro>
                    <macro>{$VFS.DEV.DEVNAME.MATCHES}</macro>
                    <value>.+</value>
                    <description>This macro is used in block devices discovery. Can be overridden on the host or linked template level</description>
                </macro>
                <macro>
                    <macro>{$VFS.DEV.DEVNAME.NOT_MATCHES}</macro>
                    <value>^(loop[0-9]*|sd[a-z][0-9]+|nbd[0-9]+|sr[0-9]+|fd[0-9]+|dm-[0-9]+|ram[0-9]+|ploop[a-z0-9]+|md[0-9]*|hcp[0-9]*|zram[0-9]*)</value>
                    <description>This macro is used in block devices discovery. Can be overridden on the host or linked template level</description>
                </macro>
                <macro>
                    <macro>{$VFS.DEV.READ.AWAIT.WARN}</macro>
                    <value>20</value>
                    <description>Disk read average response time (in ms) before the trigger would fire</description>
                </macro>
                <macro>
                    <macro>{$VFS.DEV.WRITE.AWAIT.WARN}</macro>
                    <value>20</value>
                    <description>Disk write average response time (in ms) before the trigger would fire</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.FREE.MIN.CRIT}</macro>
                    <value>5G</value>
                    <description>The critical threshold of the filesystem utilization.</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.FREE.MIN.WARN}</macro>
                    <value>10G</value>
                    <description>The warning threshold of the filesystem utilization.</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.FSNAME.MATCHES}</macro>
                    <value>.+</value>
                    <description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.FSNAME.NOT_MATCHES}</macro>
                    <value>^(/dev|/sys|/run|/proc|.+/shm$)</value>
                    <description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.FSTYPE.MATCHES}</macro>
                    <value>^(btrfs|ext2|ext3|ext4|reiser|xfs|ffs|ufs|jfs|jfs2|vxfs|hfs|apfs|refs|ntfs|fat32|zfs)$</value>
                    <description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.FSTYPE.NOT_MATCHES}</macro>
                    <value>^\s$</value>
                    <description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level</description>
                </macro>
                <macro>
                    <macro>{$VFS.FS.INODE.PFREE.MIN.CRIT}</macro>
                    <value>10</value>
                </macro>
                <macro>
                    <macro>{$VFS.FS.INODE.PFREE.MIN.WARN}</macro>
                    <value>20</value>
                </macro>
                <macro>
                    <macro>{$VFS.FS.PUSED.MAX.CRIT}</macro>
                    <value>90</value>
                </macro>
                <macro>
                    <macro>{$VFS.FS.PUSED.MAX.WARN}</macro>
                    <value>80</value>
                </macro>
            </macros>
            <valuemaps>
                <valuemap>
                    <uuid>2a378f481d824602a3c7ebb9e6901340</uuid>
                    <name>ifOperStatus</name>
                    <mappings>
                        <mapping>
                            <value>0</value>
                            <newvalue>unknown</newvalue>
                        </mapping>
                        <mapping>
                            <value>1</value>
                            <newvalue>notpresent</newvalue>
                        </mapping>
                        <mapping>
                            <value>2</value>
                            <newvalue>down</newvalue>
                        </mapping>
                        <mapping>
                            <value>3</value>
                            <newvalue>lowerlayerdown</newvalue>
                        </mapping>
                        <mapping>
                            <value>4</value>
                            <newvalue>testing</newvalue>
                        </mapping>
                        <mapping>
                            <value>5</value>
                            <newvalue>dormant</newvalue>
                        </mapping>
                        <mapping>
                            <value>6</value>
                            <newvalue>up</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>c0146ed071e943c6ae76f1ab1d98d38e</uuid>
                    <name>Linux::Interface protocol types</name>
                    <mappings>
                        <mapping>
                            <value>0</value>
                            <newvalue>from KA9Q: NET/ROM pseudo</newvalue>
                        </mapping>
                        <mapping>
                            <value>1</value>
                            <newvalue>Ethernet</newvalue>
                        </mapping>
                        <mapping>
                            <value>2</value>
                            <newvalue>Experimental Ethernet</newvalue>
                        </mapping>
                        <mapping>
                            <value>3</value>
                            <newvalue>AX.25 Level 2</newvalue>
                        </mapping>
                        <mapping>
                            <value>4</value>
                            <newvalue>PROnet token ring</newvalue>
                        </mapping>
                        <mapping>
                            <value>5</value>
                            <newvalue>Chaosnet</newvalue>
                        </mapping>
                        <mapping>
                            <value>6</value>
                            <newvalue>IEEE 802.2 Ethernet/TR/TB</newvalue>
                        </mapping>
                        <mapping>
                            <value>7</value>
                            <newvalue>ARCnet</newvalue>
                        </mapping>
                        <mapping>
                            <value>8</value>
                            <newvalue>APPLEtalk</newvalue>
                        </mapping>
                        <mapping>
                            <value>15</value>
                            <newvalue>Frame Relay DLCI</newvalue>
                        </mapping>
                        <mapping>
                            <value>19</value>
                            <newvalue>ATM</newvalue>
                        </mapping>
                        <mapping>
                            <value>23</value>
                            <newvalue>Metricom STRIP (new IANA id)</newvalue>
                        </mapping>
                        <mapping>
                            <value>24</value>
                            <newvalue>IEEE 1394 IPv4 - RFC 2734</newvalue>
                        </mapping>
                        <mapping>
                            <value>27</value>
                            <newvalue>EUI-64</newvalue>
                        </mapping>
                        <mapping>
                            <value>32</value>
                            <newvalue>InfiniBand</newvalue>
                        </mapping>
                        <mapping>
                            <value>256</value>
                            <newvalue>ARPHRD_SLIP</newvalue>
                        </mapping>
                        <mapping>
                            <value>257</value>
                            <newvalue>ARPHRD_CSLIP</newvalue>
                        </mapping>
                        <mapping>
                            <value>258</value>
                            <newvalue>ARPHRD_SLIP6</newvalue>
                        </mapping>
                        <mapping>
                            <value>259</value>
                            <newvalue>ARPHRD_CSLIP6</newvalue>
                        </mapping>
                        <mapping>
                            <value>260</value>
                            <newvalue>Notional KISS type</newvalue>
                        </mapping>
                        <mapping>
                            <value>264</value>
                            <newvalue>ARPHRD_ADAPT</newvalue>
                        </mapping>
                        <mapping>
                            <value>270</value>
                            <newvalue>ARPHRD_ROSE</newvalue>
                        </mapping>
                        <mapping>
                            <value>271</value>
                            <newvalue>CCITT X.25</newvalue>
                        </mapping>
                        <mapping>
                            <value>272</value>
                            <newvalue>Boards with X.25 in firmware</newvalue>
                        </mapping>
                        <mapping>
                            <value>280</value>
                            <newvalue>Controller Area Network</newvalue>
                        </mapping>
                        <mapping>
                            <value>512</value>
                            <newvalue>ARPHRD_PPP</newvalue>
                        </mapping>
                        <mapping>
                            <value>513</value>
                            <newvalue>Cisco HDLC</newvalue>
                        </mapping>
                        <mapping>
                            <value>516</value>
                            <newvalue>LAPB</newvalue>
                        </mapping>
                        <mapping>
                            <value>517</value>
                            <newvalue>Digital's DDCMP protocol</newvalue>
                        </mapping>
                        <mapping>
                            <value>518</value>
                            <newvalue>Raw HDLC</newvalue>
                        </mapping>
                        <mapping>
                            <value>519</value>
                            <newvalue>Raw IP</newvalue>
                        </mapping>
                        <mapping>
                            <value>768</value>
                            <newvalue>IPIP tunnel</newvalue>
                        </mapping>
                        <mapping>
                            <value>769</value>
                            <newvalue>IP6IP6 tunnel</newvalue>
                        </mapping>
                        <mapping>
                            <value>770</value>
                            <newvalue>Frame Relay Access Device</newvalue>
                        </mapping>
                        <mapping>
                            <value>771</value>
                            <newvalue>SKIP vif</newvalue>
                        </mapping>
                        <mapping>
                            <value>772</value>
                            <newvalue>Loopback device</newvalue>
                        </mapping>
                        <mapping>
                            <value>773</value>
                            <newvalue>Localtalk device</newvalue>
                        </mapping>
                        <mapping>
                            <value>774</value>
                            <newvalue>Fiber Distributed Data Interface</newvalue>
                        </mapping>
                        <mapping>
                            <value>775</value>
                            <newvalue>AP1000 BIF</newvalue>
                        </mapping>
                        <mapping>
                            <value>776</value>
                            <newvalue>sit0 device - IPv6-in-IPv4</newvalue>
                        </mapping>
                        <mapping>
                            <value>777</value>
                            <newvalue>IP over DDP tunneller</newvalue>
                        </mapping>
                        <mapping>
                            <value>778</value>
                            <newvalue>GRE over IP</newvalue>
                        </mapping>
                        <mapping>
                            <value>779</value>
                            <newvalue>PIMSM register interface</newvalue>
                        </mapping>
                        <mapping>
                            <value>780</value>
                            <newvalue>High Performance Parallel Interface</newvalue>
                        </mapping>
                        <mapping>
                            <value>781</value>
                            <newvalue>Nexus 64Mbps Ash</newvalue>
                        </mapping>
                        <mapping>
                            <value>782</value>
                            <newvalue>Acorn Econet</newvalue>
                        </mapping>
                        <mapping>
                            <value>783</value>
                            <newvalue>Linux-IrDA</newvalue>
                        </mapping>
                        <mapping>
                            <value>784</value>
                            <newvalue>Point to point fibrechannel</newvalue>
                        </mapping>
                        <mapping>
                            <value>785</value>
                            <newvalue>Fibrechannel arbitrated loop</newvalue>
                        </mapping>
                        <mapping>
                            <value>786</value>
                            <newvalue>Fibrechannel public loop</newvalue>
                        </mapping>
                        <mapping>
                            <value>787</value>
                            <newvalue>Fibrechannel fabric</newvalue>
                        </mapping>
                        <mapping>
                            <value>800</value>
                            <newvalue>Magic type ident for TR</newvalue>
                        </mapping>
                        <mapping>
                            <value>801</value>
                            <newvalue>IEEE 802.11</newvalue>
                        </mapping>
                        <mapping>
                            <value>802</value>
                            <newvalue>IEEE 802.11 + Prism2 header</newvalue>
                        </mapping>
                        <mapping>
                            <value>803</value>
                            <newvalue>IEEE 802.11 + radiotap header</newvalue>
                        </mapping>
                        <mapping>
                            <value>804</value>
                            <newvalue>ARPHRD_IEEE802154</newvalue>
                        </mapping>
                        <mapping>
                            <value>805</value>
                            <newvalue>IEEE 802.15.4 network monitor</newvalue>
                        </mapping>
                        <mapping>
                            <value>820</value>
                            <newvalue>PhoNet media type</newvalue>
                        </mapping>
                        <mapping>
                            <value>821</value>
                            <newvalue>PhoNet pipe header</newvalue>
                        </mapping>
                        <mapping>
                            <value>822</value>
                            <newvalue>CAIF media type</newvalue>
                        </mapping>
                        <mapping>
                            <value>823</value>
                            <newvalue>GRE over IPv6</newvalue>
                        </mapping>
                        <mapping>
                            <value>824</value>
                            <newvalue>Netlink header</newvalue>
                        </mapping>
                        <mapping>
                            <value>825</value>
                            <newvalue>IPv6 over LoWPAN</newvalue>
                        </mapping>
                        <mapping>
                            <value>826</value>
                            <newvalue>Vsock monitor header</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>d1641547c0b84afd895cf227c4fe9e7a</uuid>
                    <name>zabbix.host.available</name>
                    <mappings>
                        <mapping>
                            <value>0</value>
                            <newvalue>not available</newvalue>
                        </mapping>
                        <mapping>
                            <value>1</value>
                            <newvalue>available</newvalue>
                        </mapping>
                        <mapping>
                            <value>2</value>
                            <newvalue>unknown</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>2591bc98424a478c8aee21929847c8a4</uuid>
                    <name>Zabbix agent ping status</name>
                    <mappings>
                        <mapping>
                            <value>1</value>
                            <newvalue>Up</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
            </valuemaps>
        </template>
    </templates>
    <triggers>
        <trigger>
            <uuid>8ab3880cc3574da288eb3de57132a8f6</uuid>
            <expression>min(/HPC Compute Nodes/net.if.in[&quot;eth0&quot;,errors],5m)&gt;{$IF.ERRORS.WARN:&quot;eth0&quot;}
or min(/HPC Compute Nodes/net.if.out[&quot;eth0&quot;,errors],5m)&gt;{$IF.ERRORS.WARN:&quot;eth0&quot;}</expression>
            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
            <recovery_expression>max(/HPC Compute Nodes/net.if.in[&quot;eth0&quot;,errors],5m)&lt;{$IF.ERRORS.WARN:&quot;eth0&quot;}*0.8
and max(/HPC Compute Nodes/net.if.out[&quot;eth0&quot;,errors],5m)&lt;{$IF.ERRORS.WARN:&quot;eth0&quot;}*0.8</recovery_expression>
            <name>Interface eth0: High error rate</name>
            <event_name>Interface eth0: High error rate (&gt;{$IF.ERRORS.WARN:&quot;eth0&quot;} for 5m)</event_name>
            <opdata>errors in: {ITEM.LASTVALUE1}, errors out: {ITEM.LASTVALUE2}</opdata>
            <priority>WARNING</priority>
            <description>Recovers when below 80% of {$IF.ERRORS.WARN:&quot;eth0&quot;} threshold</description>
            <manual_close>YES</manual_close>
            <dependencies>
                <dependency>
                    <name>Interface eth0: Link down</name>
                    <expression>{$IFCONTROL:&quot;eth0&quot;}=1 and last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/eth0/operstate&quot;])=2 and (last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/eth0/operstate&quot;],#1)&lt;&gt;last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/eth0/operstate&quot;],#2))</expression>
                    <recovery_expression>last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/eth0/operstate&quot;])&lt;&gt;2 or {$IFCONTROL:&quot;eth0&quot;}=0</recovery_expression>
                </dependency>
            </dependencies>
            <tags>
                <tag>
                    <tag>scope</tag>
                    <value>availability</value>
                </tag>
                <tag>
                    <tag>scope</tag>
                    <value>performance</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>92429f9a75684fe693f90de341224721</uuid>
            <expression>min(/HPC Compute Nodes/net.if.in[&quot;ib0&quot;,errors],5m)&gt;{$IF.ERRORS.WARN:&quot;ib0&quot;}
or min(/HPC Compute Nodes/net.if.out[&quot;ib0&quot;,errors],5m)&gt;{$IF.ERRORS.WARN:&quot;ib0&quot;}</expression>
            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
            <recovery_expression>max(/HPC Compute Nodes/net.if.in[&quot;ib0&quot;,errors],5m)&lt;{$IF.ERRORS.WARN:&quot;ib0&quot;}*0.8
and max(/HPC Compute Nodes/net.if.out[&quot;ib0&quot;,errors],5m)&lt;{$IF.ERRORS.WARN:&quot;ib0&quot;}*0.8</recovery_expression>
            <name>Interface ib0: High error rate</name>
            <event_name>Interface ib0: High error rate (&gt;{$IF.ERRORS.WARN:&quot;ib0&quot;} for 5m)</event_name>
            <opdata>errors in: {ITEM.LASTVALUE1}, errors out: {ITEM.LASTVALUE2}</opdata>
            <priority>WARNING</priority>
            <description>Recovers when below 80% of {$IF.ERRORS.WARN:&quot;ib0&quot;} threshold</description>
            <manual_close>YES</manual_close>
            <dependencies>
                <dependency>
                    <name>Interface ib0: Link down</name>
                    <expression>{$IFCONTROL:&quot;ib0&quot;}=1 and last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/ib0/operstate&quot;])=2 and (last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/ib0/operstate&quot;],#1)&lt;&gt;last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/ib0/operstate&quot;],#2))</expression>
                    <recovery_expression>last(/HPC Compute Nodes/vfs.file.contents[&quot;/sys/class/net/ib0/operstate&quot;])&lt;&gt;2 or {$IFCONTROL:&quot;ib0&quot;}=0</recovery_expression>
                </dependency>
            </dependencies>
            <tags>
                <tag>
                    <tag>scope</tag>
                    <value>availability</value>
                </tag>
                <tag>
                    <tag>scope</tag>
                    <value>performance</value>
                </tag>
            </tags>
        </trigger>
    </triggers>
    <graphs>
        <graph>
            <uuid>5d15834739ec44719a29c1275fc55eb0</uuid>
            <name>Interface eth0: Network traffic</name>
            <graph_items>
                <graph_item>
                    <drawtype>GRADIENT_LINE</drawtype>
                    <color>1A7C11</color>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.in[&quot;eth0&quot;]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <drawtype>BOLD_LINE</drawtype>
                    <color>2774A4</color>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.out[&quot;eth0&quot;]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <color>F63100</color>
                    <yaxisside>RIGHT</yaxisside>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.out[&quot;eth0&quot;,errors]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>3</sortorder>
                    <color>A54F10</color>
                    <yaxisside>RIGHT</yaxisside>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.in[&quot;eth0&quot;,errors]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>4</sortorder>
                    <color>FC6EA3</color>
                    <yaxisside>RIGHT</yaxisside>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.out[&quot;eth0&quot;,dropped]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>5</sortorder>
                    <color>6C59DC</color>
                    <yaxisside>RIGHT</yaxisside>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.in[&quot;eth0&quot;,dropped]</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <uuid>eb86538cc5604ef6a1cfa46d31af470f</uuid>
            <name>Interface ib0: Network traffic</name>
            <graph_items>
                <graph_item>
                    <drawtype>GRADIENT_LINE</drawtype>
                    <color>1A7C11</color>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.in[&quot;ib0&quot;]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <drawtype>BOLD_LINE</drawtype>
                    <color>2774A4</color>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.out[&quot;ib0&quot;]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <color>F63100</color>
                    <yaxisside>RIGHT</yaxisside>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.out[&quot;ib0&quot;,errors]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>3</sortorder>
                    <color>A54F10</color>
                    <yaxisside>RIGHT</yaxisside>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.in[&quot;ib0&quot;,errors]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>4</sortorder>
                    <color>FC6EA3</color>
                    <yaxisside>RIGHT</yaxisside>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.out[&quot;ib0&quot;,dropped]</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>5</sortorder>
                    <color>6C59DC</color>
                    <yaxisside>RIGHT</yaxisside>
                    <item>
                        <host>HPC Compute Nodes</host>
                        <key>net.if.in[&quot;ib0&quot;,dropped]</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
    </graphs>
</zabbix_export>
